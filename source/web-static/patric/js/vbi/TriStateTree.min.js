Ext.define("Ext.ux.tree.tristate.Model",{extend:"Ext.data.Model",idProperty:"id",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"checked",type:"boolean",defaultValue:false},{name:"partial",type:"boolean",defaultValue:false},{name:"iconCls",type:"string",defaultValue:"x-tree-noicon"},{name:"leaf",type:"boolean"}]});Ext.define("Ext.ux.tree.tristate.Plugin",{extend:"Ext.AbstractPlugin",alias:"plugin.tristatetreeplugin",init:function(a){a.on("checkchange",this.updateRecord,this)},updateRecord:function(a,c){var b=this;a.cascadeBy(function(d){d.set("checked",c);d.set("partial",false)});if(a.parentNode!=undefined){b.updateAncestor(a.parentNode)}},updateAncestor:function(a){var c,b;a.bubble(function(d){c=0,b=false;d.eachChild(function(e){if(e.get("partial")){b=true}if(e.get("checked")){c++}});if(b){d.set("partial",true)}else{if(c==d.childNodes.length){d.set("checked",true);d.set("partial",false)}else{if(c==0){d.set("checked",false);d.set("partial",false)}else{d.set("partial",true)}}}})}});Ext.define("Ext.ux.tree.tristate.Column",{extend:"Ext.grid.column.Column",alias:"widget.tristatetreecolumn",renderer:function(j,l,c,b,i,e,h){var p=[],n=Ext.String.format,r=c.getDepth(),o=Ext.baseCSSPrefix+"tree-",d=o+"elbow-",k=o+"expander",g='<img src="{1}" class="{0}" />',s='<input type="button" role="checkbox" class="{0}" {1} />',f=j,m=c.get("href"),q=c.get("hrefTarget"),a=c.get("cls");while(c){if(!c.isRoot()||(c.isRoot()&&h.rootVisible)){if(c.getDepth()===r){p.unshift(n(g,o+"icon "+o+"icon"+(c.get("icon")?"-inline ":(c.isLeaf()?"-leaf ":"-parent "))+(c.get("iconCls")||""),c.get("icon")||Ext.BLANK_IMAGE_URL));if(c.get("checked")!==null){p.unshift(n(s,(o+"checkbox")+(c.get("partial")?" "+o+"checkbox-partial":c.get("checked")?" "+o+"checkbox-checked":""),c.get("checked")?'aria-checked="true"':""));if(c.get("checked")){l.tdCls+=(" "+Ext.baseCSSPrefix+"tree-checked")}}if(c.isLast()){if(c.isExpandable()){p.unshift(n(g,(d+"end-plus "+k),Ext.BLANK_IMAGE_URL))}else{p.unshift(n(g,(d+"end"),Ext.BLANK_IMAGE_URL))}}else{if(c.isExpandable()){p.unshift(n(g,(d+"plus "+k),Ext.BLANK_IMAGE_URL))}else{p.unshift(n(g,(o+"elbow"),Ext.BLANK_IMAGE_URL))}}}else{if(c.isLast()||c.getDepth()===0){p.unshift(n(g,(d+"empty"),Ext.BLANK_IMAGE_URL))}else{if(c.getDepth()!==0){p.unshift(n(g,(d+"line"),Ext.BLANK_IMAGE_URL))}}}}c=c.parentNode}if(m){f=n('<a href="{0}" target="{1}">{2}</a>',m,q,f)}if(a){l.tdCls+=" "+a}return p.join("")+f}});
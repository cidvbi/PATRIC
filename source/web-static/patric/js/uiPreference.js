Ext.define("hlx.base.state.Model",{extend:"Ext.data.Model",idProperty:"name",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]});Ext.define("hlx.base.state.Store",{extend:"Ext.data.Store",requires:["hlx.base.state.Model"],model:"hlx.base.state.Model",pageSize:-1,proxy:{type:"ajax",url:"/portal/portal/patric/BreadCrumb/WorkspaceWindow?action=b&cacheability=PAGE&action_type=HTTPProvider&action=storage",reader:{type:"json",root:"data"},writer:{type:"json"}}});Ext.define("hlx.base.state.HttpProvider",{extend:"Ext.state.Provider",requires:["hlx.base.state.Store"],uses:["Ext.state.Provider","Ext.util.Observable"],store:null,storeSyncOnLoadEnabled:true,buffered:true,writeBuffer:2000,onFirstLoad:Ext.emptyFn,constructor:function(b){b=b||{};var c=this;Ext.apply(c,b);if(!c.store){c.store=c.buildStore()}if(c.storeSyncOnLoadEnabled){var a=Ext.data.Connection.prototype.async;Ext.data.Connection.prototype.async=false;c.store.load({callback:c.onFirstLoad});Ext.data.Connection.prototype.async=a}c.callParent(arguments);if(c.buffered){c.on({statechange:{scope:c,buffer:c.writeBuffer,fn:c.sync}})}else{c.on({statechange:{scope:c,fn:c.sync}})}},set:function(a,c){var b=this,e=b.store.find("name",a),d;if(e>-1){d=b.store.getAt(e);d.set("value",b.encodeValue(c))}else{b.store.add({name:a,value:b.encodeValue(c)})}b.fireEvent("statechange",b,a,c)},get:function(b,a){var c=this,f=c.store.findExact("name",b),e,d;if(f>-1){e=c.store.getAt(f);d=c.decodeValue(e.get("value"))}else{d=a}return d},clear:function(a){var b=this,c=b.store.find("name",a);if(c>-1){b.store.removeAt(c);b.fireEvent("statechange",b,a,null)}},sync:function(){this.store.sync()},buildStore:function(){return Ext.create("hlx.base.state.Store")}});
Ext.state.Manager.setProvider(Ext.create('hlx.base.state.HttpProvider',{}));